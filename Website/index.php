<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Prosgrunn Traffic Daily</title>
<meta name="Generator" content="Serif WebPlus X6 (14.0.0.020)">
<meta name="viewport" content="width=969">
<style type="text/css">
body{margin:0;padding:0;}
.Heading-1-C
{
	font-family: "Trebuchet MS", sans-serif;
	font-weight: 700;
	color: #006666;
	font-size: 15.0px;
	line-height: 1.33em;
}
.Placeholder-C
{
	font-family: "Trebuchet MS", sans-serif;
	font-weight: 700;
	color: #006666;
	font-size: 19.0px;
	line-height: 1.26em;
}
.Placeholder-C-C0
{
    font-family:"Tahoma", sans-serif; color:#1f263e; font-size:11.0px; line-height:1.60em;
}
.Placeholder-C-C1
{
    font-family:"Tahoma", sans-serif; color:#ffffff; font-size:11.0px; line-height:1.60em;
}
.Placeholder-C-C2
{
    font-family:"Tahoma", sans-serif; font-size:11.0px; line-height:1.60em;
}
.Heading-1-C-C0
{
	font-family: "Trebuchet MS", sans-serif;
	font-weight: 700;
	color: #006666;
	font-size: 19.0px;
	line-height: 1.26em;
}
.Heading-2-C
{
    font-family:"Trebuchet MS", sans-serif; font-weight:700; color:#00a9ec; font-size:19.0px; line-height:1.26em;
}
.Body-Text-1-C
{
    font-family:"Tahoma", sans-serif; font-size:11.0px; line-height:1.60em;
}
.Heading-2-C-C0
{
	font-family: "Trebuchet MS", sans-serif;
	font-weight: 700;
	color: #006666;
	font-size: 32.0px;
	line-height: 1.25em;
}

.hover-effect {
  display: inline-block;
  overflow: hidden;
  position: relative;
  transition: transform 0.3s ease;
}

.hover-effect:hover {
  transform: scale(1.2); /* Adjust the scale value to control the level of enlargement */
}
.cell-link {
  border: 1px solid black;
  text-align: center;
}

.cell-link a {
  display: inline-block;
  padding: 7px; /* Adjust padding as needed */
  text-decoration: none;
  color: black;
  transition: background-color 0.3s ease;
}

.cell-link a:hover {
  background-color: #eaeaea; /* Adjust background color on hover */
}


</style>
<script type="text/javascript" src="wpscripts/jspngfix.js"></script>
<link rel="stylesheet" href="wpscripts/wpstyles.css" type="text/css"><script type="text/javascript">
var blankSrc = "wpscripts/blank.gif";
</script>
</head>

<body text="#000000" style="background:#ffffff url('wpimages/wp110b269a_06.png') repeat-x scroll top center; height:1117px;">
<div style="background-color:transparent;margin-left:auto;margin-right:auto;position:relative;width:969px;height:1300px;">

<img src="wpimages/wpe1212f27_06.png" border="0" width="755" height="200" id="txt_1" title="" alt="Porsgrunn Traffic Daily&#10;" onload="OnLoadPngFix()" style="position:absolute;left:136px;top:108px;">
<img src="wpimages/wpc07fde51_06.png" border="0" width="743" height="1" id="crv_1" alt="" onload="OnLoadPngFix()" style="position:absolute;left:24px;top:77px;">
<img src="wpimages/wp01e8e69b_06.png" border="0" width="945" height="1" id="crv_2" alt="" onload="OnLoadPngFix()" style="position:absolute;left:24px;top:64px;">


<a href="https://prod-uk-a.online.tableau.com/#/site/2589144dccd0e4f1/views/Trafficcountingsystem/Dashboard1?:iid=2"><img src="wpimages/Traffic management.png" border="0" width="590" height="704" id="pic_1" alt="" style="position: absolute; left: 67px; top: 800px; width: 197px; height: 214px;"></a>
<div id="txt_3" style="position: absolute; left: 9px; top: 733px; width: 313px; height: 43px; overflow: hidden;">
  <h1 class="Wp-Heading-1-P"><span class="Heading-1-C"><span class="Heading-1-C-C0">Traffic Management - Dashboard</span></span></h1>
</div>
<div id="txt_5" style="position:absolute;left:362px;top:315px;width:400px;height:30px;overflow:hidden;">
<h2 class="Wp-Heading-2-P"><span class="Placeholder-C">Overview</span></h2>
</div>
<div id="txt_6" style="position:absolute;left:363px;top:352px;width:561px;height:97px;overflow:hidden;">
<p class="Wp-Body-Text-1-P"><span class="Placeholder-C-C0">Welcome to our cutting-edge Vehicle Traffic Monitoring System designed specifically
    for the Porsgrunn Commune. Our advanced image recognition technology is set to revolutionize
    the way traffic is monitored and managed in your community. With a focus on efficiency,
    safety, and sustainability, our system provides real-time insights into traffic pattern</span><span class="Placeholder-C-C1">s,
    enabling better decision-making and improved overall traffic flow.</span></p>
<p class="Wp-Body-Text-1-P"><span class="Placeholder-C-C1"><br></span></p>
<p class="Wp-Body-Text-1-P"><span class="Placeholder-C-C2"><br></span></p>
</div>
<img src="wpimages/wp8a8de85a_06.png" border="0" width="281" height="1" id="crv_13" alt="" onload="OnLoadPngFix()" style="position:absolute;left:37px;top:388px;">
<img src="wpimages/wp002048a4_06.png" border="0" width="281" height="1" id="crv_14" alt="" onload="OnLoadPngFix()" style="position:absolute;left:37px;top:389px;">
<div id="txt_12" style="position: absolute; left: 7px; top: 410px; width: 302px; height: 56px; overflow: hidden;">
<h1 class="Wp-Heading-1-P"><span class="Heading-1-C-C0">Smart Parking - Dashboard</span></h1>
</div>
<img src="wpimages/wpbf1ed04a_06.png" border="0" width="16" height="759" id="qs_19" alt="" onload="OnLoadPngFix()" style="position: absolute; left: 328px; top: 334px;"><img src="wpimages/wpfe5f5e01_06.png" border="0" width="262" height="18" id="qs_182" alt="" onload="OnLoadPngFix()" style="position:absolute;left:43px;top:698px;">
<img src="wpimages/wp1a1b2dc1_06.png" border="0" width="305" height="2" id="qs_183" alt="" onload="OnLoadPngFix()" style="position:absolute;left:0px;top:697px;">
<img src="wpimages/wp04a5a731_06.png" border="0" width="305" height="2" id="qs_184" alt="" onload="OnLoadPngFix()" style="position:absolute;left:0px;top:713px;">
<div id="txt_94" style="position:absolute;left:44px;top:317px;width:291px;height:55px;overflow:hidden;">
<h2 class="Wp-Heading-2-P"><span class="Heading-2-C-C0">Our Services</span></h2>
</div>
<div id="panel_1" style="position:absolute;left:363px;top:433px;width:550px;height:169px;">

<?php
    $servername = "localhost";
    $username = "u607713813_porsgrunnpark";
    $password = "Porsgrunn@1064";
    $dbname = "u607713813_parking";
    
    // Create connection
    $conn = new mysqli($servername, $username, $password, $dbname);
    // Check connection
    if ($conn->connect_error) {
      die("Connection failed: " . $conn->connect_error);
    }
    
    $sql = "SELECT t.*
    FROM parking_data t
    INNER JOIN (
        SELECT MAX(time) AS max_time, place
        FROM parking_data
        GROUP BY place
    ) AS latest
    ON t.place = latest.place AND t.time = latest.max_time";
    $result = $conn->query($sql);
    
    ?>
    <h2>Parking Data</h2>
    <table style="border-collapse: collapse; width: 100%;">
        <tr>
            <th style="border: 1px solid black; text-align: center;">Timestamp</th>
            <th style="border: 1px solid black; text-align: center;">Car Count</th>
            <th style="border: 1px solid black; text-align: center;">Free Space</th>
            <th style="border: 1px solid black; text-align: center;">Place</th>
        </tr>
        <?php foreach ($result as $row) { ?>
            <tr>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['time']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['car_count']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['free_space']; ?></td>
             <td class="cell-link"><a href="location.php?place=<?php echo urlencode($row['place']); ?>"><?php echo $row['place']; ?></a></td>
            </tr>
        <?php } ?>
    </table>
    
    
    
    
    
<?php
    $host = 'localhost';
    $dbname2 = 'u607713813_traffic';
    $username2 = 'u607713813_porsgrunn';
    $password2 = 'Porsgrunn@1064';
    
    // Create connection
    $conn2 = new mysqli($host, $username2, $password2, $dbname2);
    // Check connection
    if ($conn2->connect_error) {
      die("Connection failed: " . $conn2->connect_error);
    }
    
    $sql2 = "SELECT DATE(timestamp) AS date,
    place, 
    SUM(car_count_outgoing) AS total_car_count_outgoing,
    SUM(truck_count_outgoing) AS total_truck_count_outgoing,
    SUM(bus_count_outgoing) AS total_bus_count_outgoing
    FROM vehicle_counts
    WHERE timestamp >= DATE_SUB(CURDATE(), INTERVAL 20 DAY)
    GROUP BY date, place";
    $result2 = $conn2->query($sql2);
    
    ?>
    <h2>Vehicle  Outgoing</h2>
    <table style="border-collapse: collapse; width: 100%;">
        <tr>

            <th style="border: 1px solid black; text-align: center;">Cars Count</th>
            <th style="border: 1px solid black; text-align: center;">Trucks Count</th>
            <th style="border: 1px solid black; text-align: center;">Buses Count</th>
            <th style="border: 1px solid black; text-align: center;">Date</th>

        </tr>
        <?php foreach ($result2 as $row) { ?>
            <tr>

                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_car_count_outgoing']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_truck_count_outgoing']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_bus_count_outgoing']; ?></td>
               <td class="cell-link"><a href="traffic.php?date=<?php echo urlencode($row['date']); ?>"><?php echo $row['date']; ?></a></td>

            </tr>
        <?php } ?>
    </table>
    
    <?php
    $host = 'localhost';
    $dbname2 = 'u607713813_traffic';
    $username2 = 'u607713813_porsgrunn';
    $password2 = 'Porsgrunn@1064';
    
    // Create connection
    $conn2 = new mysqli($host, $username2, $password2, $dbname2);
    // Check connection
    if ($conn2->connect_error) {
      die("Connection failed: " . $conn2->connect_error);
    }
    
    $sql2 = "SELECT DATE(timestamp) AS date,
    place, 
    SUM(car_count_incoming) AS total_car_count_incoming,
    SUM(truck_count_incoming) AS total_truck_count_incoming,
    SUM(bus_count_incoming) AS total_bus_count_incoming
    FROM vehicle_counts
    WHERE timestamp >= DATE_SUB(CURDATE(), INTERVAL 20 DAY)
    GROUP BY date, place
    ORDER BY date";
    $result2 = $conn2->query($sql2);
    
    ?>
    <h2>Vehicle  Incoming</h2>
    <table style="border-collapse: collapse; width: 100%;">
        <tr>
            
            <th style="border: 1px solid black; text-align: center;">Cars Incoming</th>
            <th style="border: 1px solid black; text-align: center;">Trucks Incoming</th>
            <th style="border: 1px solid black; text-align: center;">Buses Incoming</th>
            <th style="border: 1px solid black; text-align: center;">Date</th>
        </tr>
        <?php foreach ($result2 as $row) { ?>
            <tr>
               
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_car_count_incoming']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_truck_count_incoming']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_bus_count_incoming']; ?></td>
                <td class="cell-link"><a href="trafficincoming.php?date=<?php echo urlencode($row['date']); ?>"><?php echo $row['date']; ?></a></td>
            </tr>
        <?php } ?>
    </table>
    
    


</div>

<a href="https://prod-uk-a.online.tableau.com/#/site/2589144dccd0e4f1/views/Vehicalparkingsystem/PorsgrunnParkingDashboard?:iid=3"><img src="wpimages/Smart parking.png" border="0" width="996" height="1022" id="pic_13" title="" alt="Terms &amp; Conditions" onload="OnLoadPngFix()" style="position: absolute; left: 68px; top: 483px; width: 198px; height: 200px;"></a></div>
</body>
</html>