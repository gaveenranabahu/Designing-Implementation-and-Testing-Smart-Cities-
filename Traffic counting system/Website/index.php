<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Home</title>
<meta name="Generator" content="Serif WebPlus X6 (14.0.0.020)">
<meta name="viewport" content="width=969">
<style type="text/css">
body{margin:0;padding:0;}
.Heading-1-C
{
    font-family:"Trebuchet MS", sans-serif; font-weight:700; color:#323f67; font-size:15.0px; line-height:1.33em;
}
.Placeholder-C
{
    font-family:"Trebuchet MS", sans-serif; font-weight:700; color:#3d4c7c; font-size:19.0px; line-height:1.26em;
}
.Placeholder-C-C0
{
    font-family:"Tahoma", sans-serif; color:#1f263e; font-size:11.0px; line-height:1.60em;
}
.Placeholder-C-C1
{
    font-family:"Tahoma", sans-serif; color:#ffffff; font-size:11.0px; line-height:1.60em;
}
.Placeholder-C-C2
{
    font-family:"Tahoma", sans-serif; font-size:11.0px; line-height:1.60em;
}
.Heading-1-C-C0
{
    font-family:"Trebuchet MS", sans-serif; font-weight:700; color:#323f67; font-size:19.0px; line-height:1.26em;
}
.Heading-2-C
{
    font-family:"Trebuchet MS", sans-serif; font-weight:700; color:#00a9ec; font-size:19.0px; line-height:1.26em;
}
.Body-Text-1-C
{
    font-family:"Tahoma", sans-serif; font-size:11.0px; line-height:1.60em;
}
.Heading-2-C-C0
{
    font-family:"Trebuchet MS", sans-serif; font-weight:700; color:#3d4c7c; font-size:32.0px; line-height:1.25em;
}
</style>
<script type="text/javascript" src="wpscripts/jspngfix.js"></script>
<link rel="stylesheet" href="wpscripts/wpstyles.css" type="text/css"><script type="text/javascript">
var blankSrc = "wpscripts/blank.gif";
</script>
</head>

<body text="#000000" style="background:#ffffff url('wpimages/wp110b269a_06.png') repeat-x scroll top center; height:1117px;">
<div style="background-color:transparent;margin-left:auto;margin-right:auto;position:relative;width:969px;height:1117px;">
<img src="wpimages/wp08ca0b50_06.png" border="0" width="948" height="53" id="qs_14" alt="" onload="OnLoadPngFix()" style="position:absolute;left:21px;top:1064px;">
<img src="wpimages/wpe1212f27_06.png" border="0" width="755" height="200" id="txt_1" title="" alt="Porsgrunn Traffic Daily&#10;" onload="OnLoadPngFix()" style="position:absolute;left:136px;top:108px;">
<img src="wpimages/wpc07fde51_06.png" border="0" width="743" height="1" id="crv_1" alt="" onload="OnLoadPngFix()" style="position:absolute;left:24px;top:77px;">
<img src="wpimages/wp01e8e69b_06.png" border="0" width="945" height="1" id="crv_2" alt="" onload="OnLoadPngFix()" style="position:absolute;left:24px;top:64px;">
<img src="wpimages/wpa3022688_05_06.jpg" border="0" width="113" height="113" id="pic_1" alt="" style="position:absolute;left:47px;top:797px;">
<img src="wpimages/wpc05c31b4_05_06.jpg" border="0" width="113" height="113" id="pic_5" alt="" style="position:absolute;left:45px;top:912px;">
<div id="txt_3" style="position:absolute;left:57px;top:757px;width:174px;height:25px;overflow:hidden;">
<h1 class="Wp-Heading-1-P"><span class="Heading-1-C">TRAFFIC MANAGEMENT </span></h1>
</div>
<div id="txt_5" style="position:absolute;left:362px;top:315px;width:400px;height:30px;overflow:hidden;">
<h2 class="Wp-Heading-2-P"><span class="Placeholder-C">Overview</span></h2>
</div>
<div id="txt_6" style="position:absolute;left:363px;top:352px;width:561px;height:97px;overflow:hidden;">
<p class="Wp-Body-Text-1-P"><span class="Placeholder-C-C0">Welcome to our cutting-edge Vehicle Traffic Monitoring System designed specifically
    for the Porsgrunn Commune. Our advanced image recognition technology is set to revolutionize
    the way traffic is monitored and managed in your community. With a focus on efficiency,
    safety, and sustainability, our system provides real-time insights into traffic pattern</span><span class="Placeholder-C-C1">s,
    enabling better decision-making and improved overall traffic flow.</span></p>
<p class="Wp-Body-Text-1-P"><span class="Placeholder-C-C1"><br></span></p>
<p class="Wp-Body-Text-1-P"><span class="Placeholder-C-C2"><br></span></p>
</div>
<img src="wpimages/wp8a8de85a_06.png" border="0" width="281" height="1" id="crv_13" alt="" onload="OnLoadPngFix()" style="position:absolute;left:37px;top:388px;">
<img src="wpimages/wp002048a4_06.png" border="0" width="281" height="1" id="crv_14" alt="" onload="OnLoadPngFix()" style="position:absolute;left:37px;top:389px;">
<div id="txt_12" style="position:absolute;left:47px;top:411px;width:264px;height:30px;overflow:hidden;">
<h1 class="Wp-Heading-1-P"><span class="Heading-1-C-C0">PARKING </span></h1>
</div>
<img src="wpimages/wpbf1ed04a_06.png" border="0" width="16" height="759" id="qs_19" alt="" onload="OnLoadPngFix()" style="position:absolute;left:299px;top:334px;">
<img src="wpimages/wpf470bebd_06.png" border="0" width="22" height="94" id="qs_20" alt="" onload="OnLoadPngFix()" style="position:absolute;left:293px;top:314px;">
<img src="wpimages/wpa51e6319_06.png" border="0" width="22" height="94" id="qs_21" alt="" onload="OnLoadPngFix()" style="position:absolute;left:293px;top:1009px;">
<map id="map0" name="map0">
    <area shape="rect" coords="16,120,98,202" href="termsandconditions0.html" alt="">
    <area shape="rect" coords="16,16,98,98" href="termsandconditions.html" alt="">
</map>
<img src="wpimages/wp64df314b_06.png" border="0" width="113" height="217" id="pic_13" title="" alt="Terms &amp; Conditions" onload="OnLoadPngFix()" usemap="#map0" style="position:absolute;left:46px;top:459px;">
<div id="txt_90" style="position:absolute;left:182px;top:504px;width:70px;height:23px;overflow:hidden;">
<p class="Wp-Body-Text-1-P"><span class="Body-Text-1-C"><a href="termsandconditions.html" style="text-decoration:underline;">Downtown</a></span></p>
</div>
<div id="txt_91" style="position:absolute;left:179px;top:599px;width:70px;height:23px;overflow:hidden;">
<p class="Wp-Body-Text-1-P"><span class="Body-Text-1-C"><a href="termsandconditions0.html" style="text-decoration:underline;">Hovanga</a></span></p>
</div>
<div id="txt_92" style="position:absolute;left:177px;top:838px;width:70px;height:23px;overflow:hidden;">
<p class="Wp-Body-Text-1-P"><span class="Body-Text-1-C">Downtown</span></p>
</div>
<div id="txt_93" style="position:absolute;left:174px;top:950px;width:70px;height:23px;overflow:hidden;">
<p class="Wp-Body-Text-1-P"><span class="Body-Text-1-C">Porsgrunn Downtown</span></p>
</div>
<img src="wpimages/wpfe5f5e01_06.png" border="0" width="262" height="18" id="qs_182" alt="" onload="OnLoadPngFix()" style="position:absolute;left:43px;top:698px;">
<img src="wpimages/wp1a1b2dc1_06.png" border="0" width="305" height="2" id="qs_183" alt="" onload="OnLoadPngFix()" style="position:absolute;left:0px;top:697px;">
<img src="wpimages/wp04a5a731_06.png" border="0" width="305" height="2" id="qs_184" alt="" onload="OnLoadPngFix()" style="position:absolute;left:0px;top:713px;">
<div id="txt_94" style="position:absolute;left:44px;top:317px;width:291px;height:55px;overflow:hidden;">
<h2 class="Wp-Heading-2-P"><span class="Heading-2-C-C0">Our Services</span></h2>
</div>
<div id="panel_1" style="position:absolute;left:363px;top:483px;width:550px;height:169px;">

<?php
    $servername = "localhost";
    $username = "u607713813_porsgrunnpark";
    $password = "Porsgrunn@1064";
    $dbname = "u607713813_parking";
    
    // Create connection
    $conn = new mysqli($servername, $username, $password, $dbname);
    // Check connection
    if ($conn->connect_error) {
      die("Connection failed: " . $conn->connect_error);
    }
    
    $sql = "SELECT t.*
    FROM parking_data t
    INNER JOIN (
        SELECT MAX(time) AS max_time, place
        FROM parking_data
        GROUP BY place
    ) AS latest
    ON t.place = latest.place AND t.time = latest.max_time";
    $result = $conn->query($sql);
    
    ?>
    <h2>Parking Data</h2>
    <table style="border-collapse: collapse; width: 100%;">
        <tr>
            <th style="border: 1px solid black; text-align: center;">Timestamp</th>
            <th style="border: 1px solid black; text-align: center;">Car Count</th>
            <th style="border: 1px solid black; text-align: center;">Free Space</th>
            <th style="border: 1px solid black; text-align: center;">Place</th>
        </tr>
        <?php foreach ($result as $row) { ?>
            <tr>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['time']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['car_count']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['free_space']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['place']; ?></td>
            </tr>
        <?php } ?>
    </table>
    
    <?php
// Database connection parameters
$servername = 'localhost';
$username = 'u607713813_porsgrunnpark';
$password = 'Porsgrunn@1064';
$dbname = 'u607713813_parking';

// Create a new connection
$conn = new mysqli($servername, $username, $password, $dbname);

// Check the connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Fetch data from the database
$sql = "SELECT t.*
    FROM empty_areas t
    INNER JOIN (
        SELECT MAX(time) AS max_time, place
        FROM empty_areas
        GROUP BY place
    ) AS latest
    ON t.place = latest.place AND t.time = latest.max_time";
$result = $conn->query($sql);

// Generate HTML table markup
if ($result->num_rows > 0) {
    echo '<table>';
    echo '<tr><th>ID</th><th>Area Name</th><th>Time</th><th>Place</th></tr>';
    
    while ($row = $result->fetch_assoc()) {
        echo '<tr>';
        echo '<td>' . $row['id'] . '</td>';
        echo '<td>' . $row['area_name'] . '</td>';
        echo '<td>' . $row['time'] . '</td>';
        echo '<td>' . $row['place'] . '</td>';
        echo '</tr>';
    }
    
    echo '</table>';
} else {
    echo 'No data found.';
}

$conn->close();
?>
    
    
    
    
<?php
    $host = 'localhost';
    $dbname2 = 'u607713813_traffic';
    $username2 = 'u607713813_porsgrunn';
    $password2 = 'Porsgrunn@1064';
    
    // Create connection
    $conn2 = new mysqli($host, $username2, $password2, $dbname2);
    // Check connection
    if ($conn2->connect_error) {
      die("Connection failed: " . $conn2->connect_error);
    }
    
    $sql2 = "SELECT DATE(timestamp) AS date,
    place, 
    SUM(car_count_outgoing) AS total_car_count_outgoing,
    SUM(truck_count_outgoing) AS total_truck_count_outgoing,
    SUM(bus_count_outgoing) AS total_bus_count_outgoing
    FROM vehicle_counts
    WHERE timestamp >= DATE_SUB(CURDATE(), INTERVAL 10 DAY)
    GROUP BY date, place
    ORDER BY date";
    $result2 = $conn2->query($sql2);
    
    ?>
    <h2>Vehicals Outgoing</h2>
    <table style="border-collapse: collapse; width: 100%;">
        <tr>
            <th style="border: 1px solid black; text-align: center;">Timestamp</th>
            <th style="border: 1px solid black; text-align: center;">Cars Count</th>
            <th style="border: 1px solid black; text-align: center;">Trucks Count</th>
            <th style="border: 1px solid black; text-align: center;">Buses Count</th>
        </tr>
        <?php foreach ($result2 as $row) { ?>
            <tr>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['date']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_car_count_outgoing']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_truck_count_outgoing']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_bus_count_outgoing']; ?></td>
            </tr>
        <?php } ?>
    </table>
    
    <?php
    $host = 'localhost';
    $dbname2 = 'u607713813_traffic';
    $username2 = 'u607713813_porsgrunn';
    $password2 = 'Porsgrunn@1064';
    
    // Create connection
    $conn2 = new mysqli($host, $username2, $password2, $dbname2);
    // Check connection
    if ($conn2->connect_error) {
      die("Connection failed: " . $conn2->connect_error);
    }
    
    $sql2 = "SELECT DATE(timestamp) AS date,
    place, 
    SUM(car_count_incoming) AS total_car_count_incoming,
    SUM(truck_count_incoming) AS total_truck_count_incoming,
    SUM(bus_count_incoming) AS total_bus_count_incoming
    FROM vehicle_counts
    WHERE timestamp >= DATE_SUB(CURDATE(), INTERVAL 10 DAY)
    GROUP BY date, place
    ORDER BY date";
    $result2 = $conn2->query($sql2);
    
    ?>
    <h2>Vehicals Incoming</h2>
    <table style="border-collapse: collapse; width: 100%;">
        <tr>
            <th style="border: 1px solid black; text-align: center;">Timestamp</th>
            <th style="border: 1px solid black; text-align: center;">Cars Incoming</th>
            <th style="border: 1px solid black; text-align: center;">Trucks Incoming</th>
            <th style="border: 1px solid black; text-align: center;">Buses Incoming</th>
        </tr>
        <?php foreach ($result2 as $row) { ?>
            <tr>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['date']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_car_count_incoming']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_truck_count_incoming']; ?></td>
                <td style="border: 1px solid black; text-align: center;"><?php echo $row['total_bus_count_incoming']; ?></td>
            </tr>
        <?php } ?>
    </table>
    
    


</div>
<div id="panel_2" style="position:absolute;left:363px;top:713px;width:550px;height:95px;">
</div>
<div id="panel_3" style="position:absolute;left:363px;top:881px;width:550px;height:101px;">
</div>
</div>
</body>
</html>